<div class="companies-container">
  <div class="companies-header">
    <h1>Empresas Fitness</h1>
    <button class="btn-create" (click)="toggleCreateForm()">
      {{ showCreateForm ? 'Cancelar' : '+ Nueva Empresa' }}
    </button>
  </div>

  <!-- Mensajes -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="successMessage" class="success-message">
    {{ successMessage }}
  </div>

  <!-- Formulario de crear empresa -->
  <div *ngIf="showCreateForm" class="create-form">
    <h2>Nueva Empresa</h2>
    
    <div class="form-group">
      <label>Nombre *</label>
      <input type="text" [(ngModel)]="newCompany.name" placeholder="Nombre de la empresa" />
    </div>

    <div class="form-group">
      <label>Email *</label>
      <input type="email" [(ngModel)]="newCompany.email" placeholder="email@empresa.com" />
    </div>

    <div class="form-group">
      <label>DescripciÃ³n</label>
      <textarea [(ngModel)]="newCompany.description" rows="3" placeholder="DescripciÃ³n de la empresa"></textarea>
    </div>

    <div class="form-group">
      <label>Logo (URL)</label>
      <input type="url" [(ngModel)]="newCompany.logo" placeholder="https://ejemplo.com/logo.png" />
    </div>

    <div class="form-group">
      <label>UbicaciÃ³n</label>
      <input type="text" [(ngModel)]="newCompany.location" placeholder="Ciudad, PaÃ­s" />
    </div>

    <div class="form-actions">
      <button class="btn-submit" (click)="createCompany()">Crear Empresa</button>
      <button class="btn-cancel" (click)="toggleCreateForm()">Cancelar</button>
    </div>
  </div>

  <div *ngIf="loading" class="loading">
    <p>Cargando empresas...</p>
  </div>

  <div class="companies-grid">
    <div 
      *ngFor="let company of companies" 
      class="company-card"
      (click)="viewCompany(company._id)"
    >
      <!-- BotÃ³n de eliminar (solo si es tu empresa) -->
      <button 
        *ngIf="isMyCompany(company)"
        class="btn-delete"
        (click)="deleteCompany(company._id, $event)"
        title="Eliminar empresa"
      >
        ğŸ—‘ï¸
      </button>

      <div class="company-logo">
        <img 
          *ngIf="company.logo" 
          [src]="company.logo" 
          alt="Logo"
          (error)="company.logo = ''"
        />
        <div *ngIf="!company.logo" class="logo-placeholder">
          {{ company.name.charAt(0).toUpperCase() }}
        </div>
      </div>

      <div class="company-info">
        <h3>{{ company.name }}</h3>
        <p class="owner" *ngIf="company.owner_id?.name">
          ğŸ‘¤ Propietario: {{ company.owner_id.name }}
        </p>
        <p class="description">{{ company.description || 'Sin descripciÃ³n' }}</p>
        <p class="location" *ngIf="company.location">ğŸ“ {{ company.location }}</p>
        
        <div class="company-stats">
          <span class="followers">ğŸ‘¥ {{ getFollowersCount(company) }} seguidores</span>
        </div>
      </div>

      <button 
        *ngIf="!isMyCompany(company)"
        class="btn-follow"
        [class.following]="isFollowing(company)"
        (click)="toggleFollow(company, $event)"
      >
        {{ isFollowing(company) ? 'Siguiendo' : 'Seguir' }}
      </button>

      <div *ngIf="isMyCompany(company)" class="my-company-badge">
        â­ Tu empresa
      </div>
    </div>
  </div>

  <div *ngIf="companies.length === 0 && !loading" class="no-companies">
    <h2>No hay empresas registradas</h2>
    <p>SÃ© el primero en registrar tu gimnasio o centro fitness</p>
    <button class="btn-create-large" (click)="toggleCreateForm()">
      + Crear Primera Empresa
    </button>
  </div>
</div>